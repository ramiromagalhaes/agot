<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>AGoT JS tests page</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js" type="text/javascript"></script>
<script src="classes.js" type="text/javascript" charset="UTF-8"></script>
<script src="houses.js" type="text/javascript" charset="UTF-8"></script>
<script src="westeros-wildlings.js" type="text/javascript" charset="UTF-8"></script>
<script src="objects-board.js" type="text/javascript" charset="UTF-8"></script>
<script src="objects.js" type="text/javascript" charset="UTF-8"></script>

<script type="text/javascript" charset="UTF-8">//<![CDATA[
function assert(expected, value) {
	if (expected === value) {
		return;
	}

	throw 'Expected: ' + expected.toString() + '; got: ' + value.toString();

	var el = document.createElement('div');
	el.textContent = 'Expected ' + expected.toString() + ' but got ' + value.toString();
	document.documentElement.appendChild(el);
}



var game = new Game(1, 3);



//Players
var p1 = new Player('P1', stark);
var p2 = new Player('P2', lannister);
var p3 = new Player('P3', baratheon);
var p4 = new Player('P4', greyjoy);
var p5 = new Player('P5', tyrell);
var p6 = new Player('P6', martell);

//Game
//var game = new Game(1, 3);
game.addPlayer(p1);
game.addPlayer(p2);
game.addPlayer(p3);



var gameStats = new GameStats();
gameStats.supply.rank = new Array(
	null,
	[lannister],
	[stark],
	[baratheon],
	null,
	[],
	null
);
gameStats.setSupply(0, lannister);
gameStats.setSupply(0, baratheon);
gameStats.setSupply(5, stark);
gameStats.setSupply(1, lannister);
gameStats.setSupply(0, baratheon);
gameStats.setSupply(2, lannister);
gameStats.setSupply(1, stark);
gameStats.setSupply(3, lannister);
gameStats.setSupply(5, stark);
gameStats.setSupply(4, lannister);
gameStats.setSupply(6, baratheon);
gameStats.setSupply(5, lannister);
gameStats.setSupply(6, baratheon);
gameStats.setSupply(6, lannister);

assert(gameStats.getSupplyOfHouse(stark), 5);
assert(gameStats.getSupplyOfHouse(lannister), 6);
assert(gameStats.getSupplyOfHouse(baratheon), 6);

var stateMachine = new GameStateMachine(game);
stateMachine.currentState = new Setup6PlayerGame(stateMachine);
stateMachine.currentState = new Setup5PlayerGame(stateMachine);
stateMachine.currentState = new Setup4PlayerGame(stateMachine);
stateMachine.currentState = new Setup3PlayerGame(stateMachine);
stateMachine.fireEvent('start');

assert(game.gameStats.ironThrone.getRank()[0].name, baratheon.name);
assert(game.gameStats.ironThrone.getRank()[1].name, lannister.name);
assert(game.gameStats.ironThrone.getRank()[2].name, stark.name);

/*
assert(stateMachine.currentState.name);
stateMachine.fireEvent('start');
assert(stateMachine.currentState.name);
stateMachine.fireEvent('start');
assert(stateMachine.currentState.name);
stateMachine.fireEvent('start');
assert(stateMachine.currentState.name);
stateMachine.fireEvent('start');
assert(stateMachine.currentState.name);
stateMachine.fireEvent('start');
assert(stateMachine.currentState.name);
stateMachine.fireEvent('start');
assert(stateMachine.currentState.name);
stateMachine.fireEvent('start');
assert(stateMachine.currentState.name);
stateMachine.fireEvent('start');
assert(stateMachine.currentState.name);
stateMachine.fireEvent('start');
assert(stateMachine.currentState.name);
stateMachine.fireEvent('start');
assert(stateMachine.currentState.name);
*/

var footman  = new Footman(stark);
var knight   = new Knight(lannister);
var ship     = new Ship(baratheon);
var siege    = new Siege(stark);
var garrison = new Garrison(noHouse, 5);

assert(footman.strength(), 1);
assert(footman.controller.name, 'Stark');
assert(knight.strength(), 2);
assert(knight.controller.name, 'Lannister');
assert(ship.strength(), 1);
assert(ship.controller.name, 'Baratheon');
//assert(siege.strength(), 4);
assert(siege.controller.name, 'Stark');
assert(garrison.strength(), 5);

var army = new Army([footman, siege]);
assert(army.controller.name, 'Stark');
assert(army.strength(pike), 1+4);


//]]></script>

</head>
<body id="body">
</body>
</html>

